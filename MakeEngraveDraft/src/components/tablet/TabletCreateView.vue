<template>
  <div class="">
    <div class="app">
      <div class="title">
        <span class="title-gray">1-</span>2<span class="title-gray">-3</span><br>
        ìœ„íŒ¨ ì£¼ë¬¸í•˜ê¸°
      </div>
    </div>
    <hr>
    <div class="app">
      <div class="title2">
        â— ìœ„íŒ¨ ê°ì¸ ì¢…ë¥˜
      </div>
      <!-- ê°€ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì»¨í…Œì´ë„ˆ -->
      <div class="text-align-center">
        <div class="scroll-container">
          <span class="link-item-color">
            <!-- ì¼ë°˜ -->
            <div v-if="engraveType === 'ì¼ë°˜'">
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ì¼ë°˜' }"
                  @click="selectedType2 = 'ì¼ë°˜'">
                <img src="../../assets/images/tablet/example/ì´ë¦„ì‹œì•ˆ/ì¼ë°˜.png" alt="ì¼ë°˜">
                <span class="selectText">[ì¼ë°˜]</span>
              </div>
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ì¼ë°˜(ë³¸ê´€)' }"
                  @click="selectedType2 = 'ì¼ë°˜(ë³¸ê´€)', name3 = ''">
                <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ì¼ë°˜(ë³¸ê´€).png" alt="ì¼ë°˜(ë³¸ê´€)">
                <span class="selectText">[ì¼ë°˜(ë³¸ê´€)]</span>
              </div>
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ë¬¸êµ¬' }"
                  @click="selectedType2 = 'ë¬¸êµ¬', name3 = ''">
                <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ì¼ë°˜(ë³¸ê´€).png" alt="ë¬¸êµ¬">
                <span class="selectText">[ë¬¸êµ¬ ë„£ê¸°]</span>
              </div>
            </div>
            <div v-if="engraveType === 'ê¸°ë…êµ'">
              <!-- ê¸°ë…êµ -->
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ê¸°ë…êµ' }"
                  @click="selectedType2 = 'ê¸°ë…êµ'">
                <img src="../../assets/images/tablet/example/ì´ë¦„ì‹œì•ˆ/ê¸°ë…êµ.png" alt="ê¸°ë…êµ">
                <span class="selectText">[ê¸°ë…êµ]</span>
              </div>
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ê¸°ë…êµ(ë³¸ê´€)' }"
                  @click="selectedType2 = 'ê¸°ë…êµ(ë³¸ê´€)', name3 = ''">
                <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ê¸°ë…êµ(ë³¸ê´€).png" alt="ê¸°ë…êµ(ë³¸ê´€)">
                <span class="selectText">[ê¸°ë…êµ(ë³¸ê´€)]</span>
              </div>
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ë¬¸êµ¬' }"
                  @click="selectedType2 = 'ë¬¸êµ¬', name3 = ''">
                <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ì¼ë°˜(ë³¸ê´€).png" alt="ë¬¸êµ¬">
                <span class="selectText">[ë¬¸êµ¬ ë„£ê¸°]</span>
              </div>
            </div>
            <div v-if="engraveType === 'ë¶ˆêµ'">
              <!-- ë¶ˆêµ -->
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ë¶ˆêµ' }"
                  @click="selectedType2 = 'ë¶ˆêµ'">
                <img src="../../assets/images/tablet/example/ì´ë¦„ì‹œì•ˆ/ë¶ˆêµ.png" alt="ë¶ˆêµ">
                <span class="selectText">[ë¶ˆêµ]</span>
              </div>
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ë¶ˆêµ(ë³¸ê´€)' }"
                  @click="selectedType2 = 'ë¶ˆêµ(ë³¸ê´€)', name3 = ''">
                <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ë¶ˆêµ(ë³¸ê´€).png" alt="ë¶ˆêµ(ë³¸ê´€)">
                <span class="selectText">[ë¶ˆêµ(ë³¸ê´€)]</span>
              </div>
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ë¬¸êµ¬' }"
                  @click="selectedType2 = 'ë¬¸êµ¬', name3 = ''">
                <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ì¼ë°˜(ë³¸ê´€).png" alt="ë¬¸êµ¬">
                <span class="selectText">[ë¬¸êµ¬ ë„£ê¸°]</span>
              </div>
            </div>
            <!-- ì²œì£¼êµ -->
            <div v-if="engraveType === 'ì²œì£¼êµ'">
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ì²œì£¼êµ' }"
                  @click="selectedType2 = 'ì²œì£¼êµ'">
                <img src="../../assets/images/tablet/example/ì´ë¦„ì‹œì•ˆ/ì²œì£¼êµ.png" alt="ì²œì£¼êµ">
                <span class="selectText">[ì²œì£¼êµ]</span>
              </div>
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ì²œì£¼êµ(ë³¸ê´€)' }"
                  @click="selectedType2 = 'ì²œì£¼êµ(ë³¸ê´€)', name3 = ''">
                <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ì²œì£¼êµ(ë³¸ê´€).png" alt="ì²œì£¼êµ(ë³¸ê´€)">
                <span class="selectText">[ì²œì£¼êµ(ë³¸ê´€)]</span>
              </div>
              <div
                  class="link-item"
                  :class="{ selected: selectedType2 === 'ë¬¸êµ¬' }"
                  @click="selectedType2 = 'ë¬¸êµ¬', name3 = ''">
                <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ì¼ë°˜(ë³¸ê´€).png" alt="ë¬¸êµ¬">
                <span class="selectText">[ë¬¸êµ¬ ë„£ê¸°]</span>
              </div>
            </div>
          </span>
        </div>
      </div>
      <hr>
      <div v-if="selectedType2 === 'ì¼ë°˜(ë³¸ê´€)' || selectedType2 === 'ê¸°ë…êµ(ë³¸ê´€)' || selectedType2 === 'ë¶ˆêµ(ë³¸ê´€)' || selectedType2 === 'ì²œì£¼êµ(ë³¸ê´€)' || selectedType === 'ê¸°ë…êµ' || selectedType === 'ì²œì£¼êµ' || selectedType2 === 'ë¬¸êµ¬'">
        <!-- ì •ë³´ì…ë ¥ -->
        <div class="text-align-center">
          <span class="info-text-align-center">
            <div v-if="selectedType2 === 'ì¼ë°˜(ë³¸ê´€)' || selectedType2 === 'ê¸°ë…êµ(ë³¸ê´€)' || selectedType2 === 'ë¶ˆêµ(ë³¸ê´€)' || selectedType2 === 'ì²œì£¼êµ(ë³¸ê´€)'">
              ë³¸ê´€ ë‚´ìš©
              <div v-if="selectedType2 === 'ì¼ë°˜(ë³¸ê´€)' || selectedType2 === 'ê¸°ë…êµ(ë³¸ê´€)' || selectedType2 === 'ë¶ˆêµ(ë³¸ê´€)' || selectedType2 === 'ì²œì£¼êµ(ë³¸ê´€)'">
                <input v-model="name3" type="text" :placeholder="defaultName3Placeholder" style="height: 30px; width: 100%;"/>
              </div>
              <div v-if="showName3KoreanWarning" class="warning_text">
                  - ë³¸ê´€ì„ í•œêµ­ì–´ë¡œ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.
              </div>
              <div v-else-if="showName3Warning" class="warning_text">
                  - ë³¸ê´€ì„ 5~9ê¸€ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.
              </div>
            </div>
            <div v-if="selectedType === 'ê¸°ë…êµ' && selectedType2 !== 'ë¬¸êµ¬'">
              ì§ë¶„
            </div>
            <!-- <span v-if="selectedType === 'ë²•ëª…'">
              ë²•ëª… ì…ë ¥<br/>
            </span> -->
            <div v-if="selectedType === 'ì²œì£¼êµ' && selectedType2 !== 'ë¬¸êµ¬'">
              ì„¸ë¡€ëª…
            </div>
            <div v-if="selectedType === 'ê¸°ë…êµ' && selectedType2 !== 'ë¬¸êµ¬'">
              <input v-model="name2" type="text" placeholder="ì§ë¶„" style="height: 30px; width: 100%;"/>
              <div v-if="showName2KoreanWarning" class="warning_text">
                - ì§ë¶„ì„ í•œêµ­ì–´ë¡œ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.
              </div>
              <div v-else-if="showName2Warning" class="warning_text">
                - ì§ë¶„ì„ 2~4ê¸€ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.
              </div>
            </div>
            <!-- <span v-if="selectedType === 'ë²•ëª…'">
              <input v-model="name2" type="text" :placeholder="name2"/>
            </span> -->
            <div v-if="selectedType === 'ì²œì£¼êµ' && selectedType2 !== 'ë¬¸êµ¬'">
              <input v-model="name2" type="text" placeholder="ì„¸ë¡€ëª…" style="height: 30px; width: 100%;"/>
              <div v-if="showName2KoreanWarning" class="warning_text">
                - ì„¸ë¡€ëª…ì„ í•œêµ­ì–´ë¡œ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.
              </div>
              <div v-else-if="showName2Warning2" class="warning_text">
                - ì„¸ë¡€ëª…ì„ 2~6ê¸€ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.
              </div>
            </div>
            <div v-if="selectedType2 === 'ë¬¸êµ¬'">
              ë¬¸êµ¬
              <input v-model="name3" type="text" placeholder="ì˜ˆ) ì•„ë²„ì§€ ì‚¬ë‘í•©ë‹ˆë‹¤." style="height: 30px; width: 100%;"/>
              <div class="title7">
                &nbsp;* ìµœëŒ€ 28ì(ê³µë°±í¬í•¨)ê¹Œì§€ ì…ë ¥ê°€ëŠ¥í•©ë‹ˆë‹¤.
              </div>
              <div v-if="showName3Warning2" class="warning_text">
                - ë¬¸êµ¬ë¥¼ 28ê¸€ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.
              </div>
            </div>
          </span>
        </div>
      </div>
      <div>
        ìœ„íŒ¨ ì¢…ë¥˜<br>
        <select :value="selectedTabletType" @change="updateSelectedTabletType" style="height: 30px; width: 100%;">
          <option value="" disabled>ìœ„íŒ¨ ì„ íƒ</option>
          <option v-for="tablet in tabletTypes" :value="tablet" :key="tablet">{{ tablet }}</option>
        </select>
      </div>
    </div>
    <div class="appbr">
      <br>
    </div>
    <div class="app">
      <!-- ë³¸ê´€ì— ë”°ë¥¸ ë°ì´í„° ì „ì†¡ê°’ ë³€ê²½ -->
      <div v-if="selectedType2 === 'ì¼ë°˜(ë³¸ê´€)' || selectedType2 === 'ê¸°ë…êµ(ë³¸ê´€)' || selectedType2 === 'ë¶ˆêµ(ë³¸ê´€)' || selectedType2 === 'ì²œì£¼êµ(ë³¸ê´€)' || selectedType2 === 'ë¬¸êµ¬'">
        <router-link :to="{name: 'result'}" @click.native="updateRouteData()" class="title4">ğŸ‘‰ ì˜ˆì‹œ ë³´ê¸° (ê°ì¸/ìœ„íŒ¨)</router-link>
      </div>
      <div v-else>
        <router-link :to="{name: 'result'}" @click.native="updateRouteData2()" class="title4">ğŸ‘‰ ì˜ˆì‹œ ë³´ê¸° (ê°ì¸/ìœ„íŒ¨)</router-link>
      </div>
    </div>
  </div>
</template>

<script>
import { mapMutations, mapGetters } from 'vuex';

export default {
  data() {
    return {
    };
  },
  computed: {
    ...mapGetters([
      'getEngraveType',
      'getSelectedType',
      'getShowRouterView',

      'getName1',
      'getName2',
      'getName3',
      'getDate1',
      'getDate1Type',
      'getDate2',
      'getDate2Type',
      'getSelectedType2',
      'getSelectedTabletType',
    ]),
    engraveType: {
      get() {
        return this.$store.getters.getEngraveType;
      },
    },
    selectedType: {
      get() {
        return this.$store.getters.getSelectedType;
      },
    },
    showRouterView: {
      get() {
        return this.$store.getters.getShowRouterView;
      },
    },
    name1: {
      get() {
        return this.$store.getters.getName1;
      },
    },
    name2: {
      get() {
        return this.$store.getters.getName2;
      },
      set(value) {
        this.$store.commit('updateName2', value);
      }
    },
    name3: {
      get() {
        return this.$store.getters.getName3;
      },
      set(value) {
        this.$store.commit('updateName3', value);
      }
    },
    date1: {
      get() {
        return this.$store.getters.getDate1;
      },
    },
    date1Type: {
      get() {
        return this.$store.getters.getDate1Type;
      },
    },
    date2: {
      get() {
        return this.$store.getters.getDate2;
      },
    },
    date2Type: {
      get() {
        return this.$store.getters.getDate2Type;
      },
    },
    selectedType2: {
      get() {
        return this.$store.getters.getSelectedType2;
      },
      set(value) {
        this.$store.commit('updateSelectedType2', value);
      }
    },
    tabletTypes() {
      return ['í°ìƒ‰', 'ê²€ì •', 'íˆ¬ëª…'];
    },
    selectedTabletType: {
      get() {
        return this.$store.getters.getSelectedTabletType;
      },
      set(value) {
        this.$store.commit('updateSelectedTabletType', value);
      }
    },
    encodedName3() {
      const trimmedName3 = this.name3.trim();

      if(this.selectedType2 === "ì¼ë°˜(ë³¸ê´€)")
        return trimmedName3 === '' ? 'í¬ë¹ˆí™ì”¨ê¸¸ë™ì‹ ìœ„' : encodeURIComponent(trimmedName3);
      else if(this.selectedType2 === "ê¸°ë…êµ(ë³¸ê´€)")
        return trimmedName3 === '' ? 'í¬ë¹ˆí™ì”¨ê¸¸ë™' : encodeURIComponent(trimmedName3);
      else if(this.selectedType2 === "ë¶ˆêµ(ë³¸ê´€)")
        return trimmedName3 === '' ? 'í¬ë¹ˆí™ì”¨ê¸¸ë™ì˜ê°€' : encodeURIComponent(trimmedName3);
      else if(this.selectedType2 === "ì²œì£¼êµ(ë³¸ê´€)")
        return trimmedName3 === '' ? 'í¬ë¹ˆí™ì”¨ê¸¸ë™' : encodeURIComponent(trimmedName3);

      return trimmedName3 === '' ? 'ë³¸ê´€' : encodeURIComponent(trimmedName3);
    },
    defaultName3Placeholder() {
      // ì—¬ê¸°ì„œ ê¸°ë³¸ placeholder ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤
      if(this.selectedType2 === "ì¼ë°˜(ë³¸ê´€)")
        return 'í¬ë¹ˆí™ì”¨ê¸¸ë™ì‹ ìœ„';
      else if(this.selectedType2 === "ê¸°ë…êµ(ë³¸ê´€)")
        return 'í¬ë¹ˆí™ì”¨ê¸¸ë™';
      else if(this.selectedType2 === "ë¶ˆêµ(ë³¸ê´€)")
        return 'í¬ë¹ˆí™ì”¨ê¸¸ë™ì˜ê°€';
      else if(this.selectedType2 === "ì²œì£¼êµ(ë³¸ê´€)")
        return 'í¬ë¹ˆí™ì”¨ê¸¸ë™';
      return 'ë³¸ê´€';
    },
    showName2Warning() {
      const name2Length = this.name2.trim().length;
      return (name2Length < 2 || name2Length > 4) && name2Length !== 0;
    },
    showName2Warning2() {
      const name2Length = this.name2.trim().length;
      return (name2Length < 2 || name2Length > 6) && name2Length !== 0;
    },
    showName2KoreanWarning() {
      // í•œê¸€ ë¬¸ìì— ëŒ€í•œ ì •ê·œì‹
      const koreanRegex= /^[ê°€-í£]*$/;
      const koreanConsonantVowelRegex = /^[ê°€-í£&&[^ã…-ã…£ã…‘-ã…£ã…“-ã…£ã…•-ã…£ã…—-ã…£ã…›-ã…£ã…œ-ã…£ã… -ã…£ã…¡-ã…£]]*$/;

      if(this.name2.length === 0)
        return false;

      return !(koreanRegex.test(this.name2) && !koreanConsonantVowelRegex.test(this.name2));
    },
    showName3Warning() {
      if(this.selectedType2 === 'ì¼ë°˜' || this.selectedType2 === 'ê¸°ë…êµ' || this.selectedType2 === 'ë¶ˆêµ' || this.selectedType2 === 'ì²œì£¼êµ')
        return false;
      const name3Length = this.name3.trim().length;
      return (name3Length < 5 || name3Length > 9) && name3Length !== 0;
    },
    showName3Warning2() {
      if(this.selectedType2 !== 'ë¬¸êµ¬')
        return false;
      const name3Length = this.name3.trim().length;
      return (name3Length < 1 || name3Length > 28) && name3Length !== 0;
    },
    showName3KoreanWarning() {
      if(this.selectedType2 === 'ì¼ë°˜' || this.selectedType2 === 'ê¸°ë…êµ' || this.selectedType2 === 'ë¶ˆêµ' || this.selectedType2 === 'ì²œì£¼êµ')
        return false;
      // í•œê¸€ ë¬¸ìì— ëŒ€í•œ ì •ê·œì‹
      const koreanRegex= /^[ê°€-í£]*$/;
      const koreanConsonantVowelRegex = /^[ê°€-í£&&[^ã…-ã…£ã…‘-ã…£ã…“-ã…£ã…•-ã…£ã…—-ã…£ã…›-ã…£ã…œ-ã…£ã… -ã…£ã…¡-ã…£]]*$/;

      if(this.name3.length === 0)
        return false;

      // return !koreanRegex.test(this.name3);
      return !(koreanRegex.test(this.name3) && !koreanConsonantVowelRegex.test(this.name3));
    },
  },
  methods: {
    updateRouteData(){
      this.name3 = decodeURIComponent(this.encodedName3);
    },
    updateRouteData2(){
      this.name3 = 'ì—†ìŒ';
    },
    updateSelectedTabletType(event) {
      this.selectedTabletType = event.target.value;
    },
  }
};
</script>