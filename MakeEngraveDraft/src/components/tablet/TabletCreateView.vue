<template>
  <div class="">
    <div class="title">
      ìœ„íŒ¨ ìƒì„±í•˜ê¸°
    </div>
    <div class="title2">
      â— ìœ„íŒ¨ ì¢…ë¥˜
    </div>
    <!-- ê°€ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì»¨í…Œì´ë„ˆ -->
    <div class="text-align-center">
      <span class="link-item-color">
        <!-- ì¼ë°˜ -->
        <div v-if="type === 'ì¼ë°˜'">
          <button
              class="link-item"
              :class="{ selected: selectedType2 === 'ì¼ë°˜' }"
              @click="selectedType2 = 'ì¼ë°˜'">
            <img src="../../assets/images/tablet/example/ì´ë¦„ì‹œì•ˆ/ì¼ë°˜.png" width="80" height="240" alt="ì¼ë°˜">
            <span class="selectText">[ì¼ë°˜]</span>
          </button>
          <button
              class="link-item"
              :class="{ selected: selectedType2 === 'ì¼ë°˜(ë³¸ê´€)' }"
              @click="selectedType2 = 'ì¼ë°˜(ë³¸ê´€)'">
            <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ì¼ë°˜(ë³¸ê´€).png" width="80" height="240" alt="ì¼ë°˜(ë³¸ê´€)">
            <span class="selectText">[ì¼ë°˜(ë³¸ê´€)]</span>
          </button>
        </div>
        <div v-if="type === 'ê¸°ë…êµ'">
          <!-- ê¸°ë…êµ -->
          <button
              class="link-item"
              :class="{ selected: selectedType2 === 'ê¸°ë…êµ' }"
              @click="selectedType2 = 'ê¸°ë…êµ'">
            <img src="../../assets/images/tablet/example/ì´ë¦„ì‹œì•ˆ/ê¸°ë…êµ.png" width="80" height="240" alt="ê¸°ë…êµ">
            <span class="selectText">[ê¸°ë…êµ]</span>
          </button>
          <button
              class="link-item"
              :class="{ selected: selectedType2 === 'ê¸°ë…êµ(ë³¸ê´€)' }"
              @click="selectedType2 = 'ê¸°ë…êµ(ë³¸ê´€)'">
            <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ê¸°ë…êµ(ë³¸ê´€).png" width="80" height="240" alt="ê¸°ë…êµ(ë³¸ê´€)">
            <span class="selectText">[ê¸°ë…êµ(ë³¸ê´€)]</span>
          </button>
        </div>
        <div v-if="type === 'ë¶ˆêµ'">
          <!-- ë¶ˆêµ -->
          <button
              class="link-item"
              :class="{ selected: selectedType2 === 'ë¶ˆêµ' }"
              @click="selectedType2 = 'ë¶ˆêµ'">
            <img src="../../assets/images/tablet/example/ì´ë¦„ì‹œì•ˆ/ë¶ˆêµ.png" width="80" height="240" alt="ë¶ˆêµ">
            <span class="selectText">[ë¶ˆêµ]</span>
          </button>
          <button
              class="link-item"
              :class="{ selected: selectedType2 === 'ë¶ˆêµ(ë³¸ê´€)' }"
              @click="selectedType2 = 'ë¶ˆêµ(ë³¸ê´€)'">
            <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ë¶ˆêµ(ë³¸ê´€).png" width="80" height="240" alt="ë¶ˆêµ(ë³¸ê´€)">
            <span class="selectText">[ë¶ˆêµ(ë³¸ê´€)]</span>
          </button>
        </div>
        <!-- ì²œì£¼êµ -->
        <div v-if="type === 'ì²œì£¼êµ'">
          <button
              class="link-item"
              :class="{ selected: selectedType2 === 'ì²œì£¼êµ' }"
              @click="selectedType2 = 'ì²œì£¼êµ'">
            <img src="../../assets/images/tablet/example/ì´ë¦„ì‹œì•ˆ/ì²œì£¼êµ.png" width="80" height="240" alt="ì²œì£¼êµ">
            <span class="selectText">[ì²œì£¼êµ]</span>
          </button>
          <button
              class="link-item"
              :class="{ selected: selectedType2 === 'ì²œì£¼êµ(ë³¸ê´€)' }"
              @click="selectedType2 = 'ì²œì£¼êµ(ë³¸ê´€)'">
            <img src="../../assets/images/tablet/example/ë³¸ê´€ì‹œì•ˆ/ì²œì£¼êµ(ë³¸ê´€).png" width="80" height="240" alt="ì²œì£¼êµ(ë³¸ê´€)">
            <span class="selectText">[ì²œì£¼êµ(ë³¸ê´€)]</span>
          </button>
        </div>
      </span>
    </div>
    <!-- ì •ë³´ì…ë ¥ -->
    <div class="text-align-center">
      <span class="info-text-align-center">
        <span class="input-info1">
         <div v-if="selectedType2 === 'ì¼ë°˜(ë³¸ê´€)' || selectedType2 === 'ê¸°ë…êµ(ë³¸ê´€)' || selectedType2 === 'ë¶ˆêµ(ë³¸ê´€)' || selectedType2 === 'ì²œì£¼êµ(ë³¸ê´€)'">
            ë³¸ê´€ ë‚´ìš©&nbsp;
          </div>
          <span v-if="selectedType === 'ê¸°ë…êµ'">
            ì§ë¶„&nbsp;
          </span>
          <!-- <span v-if="selectedType === 'ë²•ëª…'">
            ë²•ëª… ì…ë ¥<br/>
          </span> -->
          <span v-if="selectedType === 'ì²œì£¼êµ'">
            ì„¸ë¡€ëª…&nbsp;
          </span>
        </span>
        <span class="input-info2">
          <div v-if="selectedType2 === 'ì¼ë°˜(ë³¸ê´€)' || selectedType2 === 'ê¸°ë…êµ(ë³¸ê´€)' || selectedType2 === 'ë¶ˆêµ(ë³¸ê´€)' || selectedType2 === 'ì²œì£¼êµ(ë³¸ê´€)'">
            <input v-model="name0" type="text" :placeholder="defaultName0Placeholder"/>
          </div>
          <span v-if="selectedType === 'ê¸°ë…êµ'">
            <input v-model="name2" type="text" :placeholder="name2"/>
          </span>
          <!-- <span v-if="selectedType === 'ë²•ëª…'">
            <input v-model="name2" type="text" :placeholder="name2"/>
          </span> -->
          <span v-if="selectedType === 'ì²œì£¼êµ'">
            <input v-model="name2" type="text" :placeholder="name2"/>
          </span>
        </span>
      </span>
    </div>

    
    <div v-if="showName0KoreanWarning" class="warning_text">
        - ë³¸ê´€ì„ í•œêµ­ì–´ë¡œ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.
    </div>
    <div v-else-if="showName0Warning" class="warning_text">
        - ë³¸ê´€ì„ 5~8ê¸€ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.
    </div>
    <div v-else>
      <!-- ë³¸ê´€ì— ë”°ë¥¸ ë°ì´í„° ì „ì†¡ê°’ ë³€ê²½ -->
      <div v-if="selectedType2 === 'ì¼ë°˜(ë³¸ê´€)' || selectedType2 === 'ê¸°ë…êµ(ë³¸ê´€)' || selectedType2 === 'ë¶ˆêµ(ë³¸ê´€)' || selectedType2 === 'ì²œì£¼êµ(ë³¸ê´€)'">
        <router-link :to="{name: 'result'}" @click.native="updateRouteData()" class="title4">ğŸ‘‰ ì˜ˆì‹œ ë³´ê¸° (ê°ì¸/ìœ„íŒ¨)</router-link>
      </div>
      <div v-else>
        <router-link :to="{name: 'result'}" @click.native="updateRouteData2()" class="title4">ğŸ‘‰ ì˜ˆì‹œ ë³´ê¸° (ê°ì¸/ìœ„íŒ¨)</router-link>
      </div>
    </div>
  </div>
</template>

<script>
import { mapMutations, mapGetters } from 'vuex';

export default {
  data() {
    return {
    };
  },
  computed: {
    ...mapGetters([
      'getType',
      'getSelectedType',
      'getShowRouterView',

      'getName0',
      'getName1',
      'getName2',
      'getDate1',
      'getDate1Type',
      'getDate2',
      'getDate2Type',
      'getSelectedType2',
    ]),
    type: {
      get() {
        return this.$store.getters.getType;
      },
    },
    selectedType: {
      get() {
        return this.$store.getters.getSelectedType;
      },
    },
    showRouterView: {
      get() {
        return this.$store.getters.getShowRouterView;
      },
    },
    name0: {
      get() {
        return this.$store.getters.getName0;
      },
      set(value) {
        this.$store.commit('updateName0', value);
      }
    },
    name1: {
      get() {
        return this.$store.getters.getName1;
      },
    },
    name2: {
      get() {
        return this.$store.getters.getName2;
      },
    },
    date1: {
      get() {
        return this.$store.getters.getDate1;
      },
    },
    date1Type: {
      get() {
        return this.$store.getters.getDate1Type;
      },
    },
    date2: {
      get() {
        return this.$store.getters.getDate2;
      },
    },
    date2Type: {
      get() {
        return this.$store.getters.getDate2Type;
      },
    },
    selectedType2: {
      get() {
        return this.$store.getters.getSelectedType2;
      },
      set(value) {
        this.$store.commit('updateSelectedType2', value);
      }
    },
    encodedName0() {
      const trimmedName0 = this.name0.trim();

      if(this.selectedType2 === "ì¼ë°˜(ë³¸ê´€)")
        return trimmedName0 === '' ? 'í¬ë¹ˆí™ì”¨ê¸¸ë™ì‹ ìœ„' : encodeURIComponent(trimmedName0);
      else if(this.selectedType2 === "ê¸°ë…êµ(ë³¸ê´€)")
        return trimmedName0 === '' ? 'í¬ë¹ˆí™ì”¨ê¸¸ë™' : encodeURIComponent(trimmedName0);
      else if(this.selectedType2 === "ë¶ˆêµ(ë³¸ê´€)")
        return trimmedName0 === '' ? 'í¬ë¹ˆí™ì”¨ê¸¸ë™ì˜ê°€' : encodeURIComponent(trimmedName0);
      else if(this.selectedType2 === "ì²œì£¼êµ(ë³¸ê´€)")
        return trimmedName0 === '' ? 'í¬ë¹ˆí™ì”¨ê¸¸ë™' : encodeURIComponent(trimmedName0);

      return trimmedName0 === '' ? 'ë³¸ê´€' : encodeURIComponent(trimmedName0);
    },
    defaultName0Placeholder() {
      // ì—¬ê¸°ì„œ ê¸°ë³¸ placeholder ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤
      if(this.selectedType2 === "ì¼ë°˜(ë³¸ê´€)")
        return 'í¬ë¹ˆí™ì”¨ê¸¸ë™ì‹ ìœ„';
      else if(this.selectedType2 === "ê¸°ë…êµ(ë³¸ê´€)")
        return 'í¬ë¹ˆí™ì”¨ê¸¸ë™';
      else if(this.selectedType2 === "ë¶ˆêµ(ë³¸ê´€)")
        return 'í¬ë¹ˆí™ì”¨ê¸¸ë™ì˜ê°€';
      else if(this.selectedType2 === "ì²œì£¼êµ(ë³¸ê´€)")
        return 'í¬ë¹ˆí™ì”¨ê¸¸ë™';
      return 'ë³¸ê´€';
    },
    showName0Warning() {
      const name0Length = this.name0.trim().length;
      return (name0Length < 5 || name0Length > 8) && name0Length !== 0;
    },
    showName0KoreanWarning() {
      // í•œê¸€ ë¬¸ìì— ëŒ€í•œ ì •ê·œì‹
      const koreanRegex= /^[ê°€-í£]*$/;
      const koreanConsonantVowelRegex = /^[ê°€-í£&&[^ã…-ã…£ã…‘-ã…£ã…“-ã…£ã…•-ã…£ã…—-ã…£ã…›-ã…£ã…œ-ã…£ã… -ã…£ã…¡-ã…£]]*$/;

      if(this.name0.length === 0)
        return false;

      // return !koreanRegex.test(this.name0);
      return !(koreanRegex.test(this.name0) && !koreanConsonantVowelRegex.test(this.name0));
    },
    updateRouteData(){
      this.name0 = decodeURIComponent(this.encodedName0());
    },
    updateRouteData2(){
      this.name0 = 'ì—†ìŒ';
    }
  },
};
</script>